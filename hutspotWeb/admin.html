<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HutSpot - Admin Dashboard</title>
    <link rel="icon" href="image/hutspot.png" type="image/x-icon">
    <link rel="stylesheet" href="admin.css">
    <script src="admin.js" defer></script>
</head>
<body>
    <!-- Admin Login Page -->
    <div id="adminLoginPage" class="admin-login-page">
        <span class="admin-login-close" onclick="closeAdminLogin()" title="Back to main site">&times;</span>
        <div class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <img src="image/hutspot.png" alt="HutSpot Logo" class="login-logo">
                    <h1>Admin Login</h1>
                    <p>HutSpot Management System</p>
                </div>
                <form id="adminLoginForm" onsubmit="handleAdminLogin(event)">
                    <div class="form-group">
                        <label for="adminUsername">Username</label>
                        <input type="text" id="adminUsername" placeholder="Enter username" required>
                    </div>
                    <div class="form-group password-group">
                        <label for="adminPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="adminPassword" placeholder="Enter password" required>
                            <button type="button" class="show-password-btn" onclick="togglePasswordVisibility('adminPassword')">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary login-btn">Login</button>
                </form>
                <div class="login-footer">
                    <p>Demo: admin / password123</p>
                    <p><a href="#" class="forgot-password-link" onclick="showForgotPasswordForm(event)">Forgot Password?</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Form -->
    <div id="forgotPasswordPage" class="admin-login-page" style="display: none;">
        <span class="admin-login-close" onclick="closeAdminLogin()" title="Back to main site">&times;</span>
        <div class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <img src="image/hutspot.png" alt="HutSpot Logo" class="login-logo">
                    <h1>Reset Password</h1>
                    <p>Enter your email to reset your password</p>
                </div>
                <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)">
                    <div class="form-group">
                        <label for="resetEmail">Email Address</label>
                        <input type="email" id="resetEmail" placeholder="Enter your email" required>
                    </div>
                    <button type="submit" class="btn btn-primary login-btn">Send Reset Link</button>
                </form>
                <div class="login-footer">
                    <p><a href="#" class="forgot-password-link" onclick="backToLogin(event)">Back to Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Reset Confirmation -->
    <div id="resetConfirmationPage" class="admin-login-page" style="display: none;">
        <div class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <div class="reset-success-icon">‚úì</div>
                    <h1>Email Sent</h1>
                    <p>Check your email for password reset instructions</p>
                </div>
                <div class="reset-message">
                    <p>A password reset link has been sent to your email address. Please check your inbox and follow the instructions to reset your password.</p>
                </div>
                <button type="button" class="btn btn-primary login-btn" onclick="backToLogin(event)">Return to Login</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard (Hidden until login) -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
    <!-- Admin Sidebar Navigation -->
    <div class="admin-sidebar" id="adminSidebar">
        <div class="sidebar-header">
            <img src="image/hutspot.png" alt="Logo" class="sidebar-logo">
            <h2>HutSpot Admin</h2>
        </div>

        <nav class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="showAdminPage('dashboard')">
                <span class="menu-icon">üìä</span>
                <span class="menu-text">Dashboard</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('bookings')">
                <span class="menu-icon">üìã</span>
                <span class="menu-text">Bookings</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('payments')">
                <span class="menu-icon">üí≥</span>
                <span class="menu-text">Payments</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('services')">
                <span class="menu-icon">üéØ</span>
                <span class="menu-text">Services</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('venues')">
                <span class="menu-icon">üè¢</span>
                <span class="menu-text">Venues</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('calendar')">
                <span class="menu-icon">üìÖ</span>
                <span class="menu-text">Calendar</span>
            </a>
            <a href="#" class="menu-item" onclick="showAdminPage('reports')">
                <span class="menu-icon">üìà</span>
                <span class="menu-text">Reports</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="logout-btn" onclick="adminLogout()">Logout</button>
        </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleAdminSidebar()"></div>

    <!-- Admin Main Content -->
    <div class="admin-main">
        <!-- Top Header -->
        <div class="admin-header">
            <div class="burger-menu-admin" id="burgerMenuAdmin" onclick="toggleAdminSidebar()">
                <span class="burger-bar"></span>
                <span class="burger-bar"></span>
                <span class="burger-bar"></span>
            </div>
            <h1 id="pageTitle">Dashboard</h1>
            <div class="header-actions">
                <input type="text" id="searchBox" placeholder="Search..." class="search-box">
                <div class="notification-wrapper">
                    <button class="btn btn-secondary notification-btn" onclick="toggleNotifications()">
                        <span class="notif-bell">üîî</span>
                        <span id="notifCount" class="notif-count"></span>
                    </button>
                    <div id="notificationDropdown" class="notification-dropdown">
                        <div class="notification-header">
                            <h4>Notifications</h4>
                            <button class="mark-read-btn" onclick="toggleNotifications()">‚úï</button>
                        </div>
                        <div id="notificationList" class="notification-list">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="admin-user">
                    <span id="adminName">Admin</span>
                    <img src="image/hutspot.png" alt="Admin" class="admin-avatar">
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="admin-page active">
            <div class="dashboard-grid">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #ff9800;">üìã</div>
                        <div class="stat-content">
                            <h3>Total Bookings</h3>
                            <p class="stat-number" id="totalBookings">0</p>
                            <small>All time</small>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: #4caf50;">‚úì</div>
                        <div class="stat-content">
                            <h3>Confirmed</h3>
                            <p class="stat-number" id="confirmedBookings">0</p>
                            <small>Active bookings</small>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: #2196f3;">üí∞</div>
                        <div class="stat-content">
                            <h3>Total Revenue</h3>
                            <p class="stat-number" id="totalRevenue">‚Ç±0</p>
                            <small>Paid payments</small>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: #9c27b0;">üë•</div>
                        <div class="stat-content">
                            <h3>Customers</h3>
                            <p class="stat-number" id="totalCustomers">0</p>
                            <small>Registered users</small>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h3>Bookings This Month</h3>
                        <div id="bookingsChart" class="chart-placeholder">Chart loading...</div>
                    </div>

                    <div class="chart-card">
                        <h3>Booking Status Distribution</h3>
                        <div id="statusChart" class="chart-placeholder">Chart loading...</div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h3>Recent Bookings</h3>
                    <div id="recentBookingsList" class="activity-list">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Bookings Page -->
        <div id="bookingsPage" class="admin-page">
            <div class="page-header">
                <h2>Bookings Management</h2>
                <div class="filter-controls">
                    <select id="statusFilter" onchange="filterBookings()">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="confirmed">Confirmed</option>
                        <option value="rejected">Rejected</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>

                    <input type="date" id="dateFilter" onchange="filterBookings()">

                    <select id="eventTypeFilter" onchange="filterBookings()">
                        <option value="">All Event Types</option>
                        <option value="birthday">Birthday</option>
                        <option value="wedding">Wedding</option>
                        <option value="corporate">Corporate</option>
                        <option value="anniversary">Anniversary</option>
                        <option value="seminar">Seminar</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table class="bookings-table">
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>Customer</th>
                            <th>Event Type</th>
                            <th>Date & Time</th>
                            <th>Venue</th>
                            <th>Guests</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Payments Page -->
        <div id="paymentsPage" class="admin-page">
            <div class="page-header">
                <h2>Payment Management</h2>
                <div class="filter-controls">
                    <select id="paymentStatusFilter" onchange="filterPayments()">
                        <option value="">All Payments</option>
                        <option value="pending">Pending</option>
                        <option value="paid">Paid</option>
                        <option value="partial">Partial</option>
                        <option value="failed">Failed</option>
                    </select>

                    <input type="date" id="paymentDateFilter" onchange="filterPayments()">
                </div>
            </div>

            <div class="table-container">
                <table class="payments-table">
                    <thead>
                        <tr>
                            <th>Payment ID</th>
                            <th>Booking ID</th>
                            <th>Customer</th>
                            <th>Amount</th>
                            <th>Down Payment</th>
                            <th>Balance</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="paymentsTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Services Page -->
        <div id="servicesPage" class="admin-page">
            <div class="page-header">
                <h2>Services Management</h2>
                <button class="btn btn-primary" onclick="openServiceModal()">+ Add Service</button>
            </div>

            <div class="services-grid" id="servicesGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Venues Page -->
        <div id="venuesPage" class="admin-page">
            <div class="page-header">
                <h2>Venues Management</h2>
                <button class="btn btn-primary" onclick="openVenueModal()">+ Add Venue</button>
            </div>

            <div class="venues-grid" id="venuesGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Calendar Page -->
        <div id="calendarPage" class="admin-page">
            <div class="page-header">
                <h2>Event Calendar</h2>
                <div class="calendar-controls">
                    <button class="btn btn-secondary" onclick="previousMonth()">‚Üê Previous</button>
                    <h3 id="currentMonth">December 2025</h3>
                    <button class="btn btn-secondary" onclick="nextMonth()">Next ‚Üí</button>
                </div>
            </div>

            <div class="calendar-container">
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Populated by JavaScript -->
                </div>
                
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color today"></span>
                        <span>Today</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color confirmed"></span>
                        <span>Confirmed</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color pending"></span>
                        <span>Pending</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color completed"></span>
                        <span>Completed</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color available"></span>
                        <span>Available</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Page -->
        <div id="reportsPage" class="admin-page">
            <div class="page-header">
                <h2>Reports & Analytics</h2>
            </div>

            <div class="reports-container">
                <div class="report-section">
                    <h3>Generate Report</h3>
                    <div class="report-form">
                        <div class="form-group">
                            <label>Report Type:</label>
                            <select id="reportType">
                                <option value="monthly">Monthly</option>
                                <option value="weekly">Weekly</option>
                                <option value="custom">Custom Date Range</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Start Date:</label>
                            <input type="date" id="reportStartDate">
                        </div>

                        <div class="form-group">
                            <label>End Date:</label>
                            <input type="date" id="reportEndDate">
                        </div>

                        <button class="btn btn-primary" onclick="generateReport()">Generate Report</button>
                        <button class="btn btn-secondary" onclick="downloadReport()">Download PDF</button>
                    </div>
                </div>

                <div class="report-section">
                    <h3>Report Preview</h3>
                    <div id="reportPreview" class="report-preview">
                        <!-- Report will be generated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Booking Details Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-box">
                <h2>Booking Details</h2>
                <div id="bookingDetails" class="booking-details">
                    <!-- Populated by JavaScript -->
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeBookingModal()">Close</button>
                    <button class="btn btn-primary" id="updateStatusBtn" onclick="updateBookingStatus()">Update Status</button>
                </div>
                <span class="close" onclick="closeBookingModal()">&times;</span>
            </div>
        </div>
    </div>

    <!-- Payment Verification Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-box">
                <h2>Payment Verification</h2>
                <div id="paymentDetails" class="payment-details">
                    <!-- Populated by JavaScript -->
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closePaymentModal()">Close</button>
                    <button class="btn btn-success" id="verifyPaymentBtn" onclick="verifyPayment()">Verify Payment</button>
                </div>
                <span class="close" onclick="closePaymentModal()">&times;</span>
            </div>
        </div>
    </div>

    <!-- Service Modal -->
    <div id="serviceModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-box">
                <h2 id="serviceModalTitle">Add Service</h2>
                <form id="serviceForm" onsubmit="saveService(event)">
                    <div class="form-group">
                        <label>Service Name:</label>
                        <input type="text" id="serviceName" required>
                    </div>
                    <div class="form-group">
                        <label>Description:</label>
                        <textarea id="serviceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price (‚Ç±):</label>
                        <input type="number" id="servicePrice" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Category:</label>
                        <input type="text" id="serviceCategory">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeServiceModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Service</button>
                    </div>
                </form>
                <span class="close" onclick="closeServiceModal()">&times;</span>
            </div>
        </div>
    </div>

    <!-- Venue Modal -->
    <div id="venueModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-box">
                <h2 id="venueModalTitle">Add Venue</h2>
                <form id="venueForm" onsubmit="saveVenue(event)">
                    <div class="form-group">
                        <label>Venue Name:</label>
                        <input type="text" id="venueName" required>
                    </div>
                    <div class="form-group">
                        <label>Description:</label>
                        <textarea id="venueDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Capacity (guests):</label>
                        <input type="number" id="venueCapacity" min="1">
                    </div>
                    <div class="form-group">
                        <label>Amenities:</label>
                        <input type="text" id="venueAmenities" placeholder="Comma-separated list">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeVenueModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Venue</button>
                    </div>
                </form>
                <span class="close" onclick="closeVenueModal()">&times;</span>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="modal">
        <div class="modal-overlay">
            <div class="notification-box">
                <span class="close" onclick="closeNotificationModal()">&times;</span>
                <div class="notification-header">
                    <h3 id="notificationTitle">Message</h3>
                </div>
                <div class="notification-body">
                    <p id="notificationMessage">Your message here</p>
                </div>
                <div class="notification-footer">
                    <button class="btn btn-primary" onclick="closeNotificationModal()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-overlay">
            <div class="notification-box">
                <span class="close" onclick="closeConfirmationModal()">&times;</span>
                <div class="notification-header">
                    <h3 id="confirmationTitle">Confirm</h3>
                </div>
                <div class="notification-body">
                    <p id="confirmationMessage">Are you sure?</p>
                </div>
                <div class="notification-footer">
                    <button class="btn btn-secondary" onclick="closeConfirmationModal()">Cancel</button>
                    <button class="btn btn-danger" id="confirmationOkBtn" onclick="executeConfirmation()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="imageViewerModal" class="modal" style="background: rgba(0, 0, 0, 0.95);">
        <div class="modal-overlay" onclick="closeImageModal()"></div>
        <div style="position: relative; z-index: 10001; max-width: 95vw; max-height: 95vh; display: flex; flex-direction: column; align-items: center;">
            <span class="close" onclick="closeImageModal()" style="position: absolute; top: -40px; right: 0; font-size: 36px; color: white; cursor: pointer; z-index: 10002;">&times;</span>
            <img id="imageViewerImg" src="" alt="Payment Proof" style="max-width: 100%; max-height: 90vh; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
            <p id="imageViewerFileName" style="color: white; margin-top: 15px; font-size: 1rem;"></p>
        </div>
    </div>

    <!-- Edit Booking Modal -->
    <div id="editBookingModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-box">
                <h2 id="editBookingModalTitle">Edit Booking</h2>
                <form id="editBookingForm" onsubmit="saveBookingEdit(event)">
                    <input type="hidden" id="editBookingId">
                    <div class="form-group">
                        <label>Customer Name:</label>
                        <input type="text" id="editBookingName" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="editBookingEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Phone:</label>
                        <input type="tel" id="editBookingPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Event Type:</label>
                        <input type="text" id="editBookingEventType" required>
                    </div>
                    <div class="form-group">
                        <label>Event Date:</label>
                        <input type="date" id="editBookingEventDate" required>
                    </div>
                    <div class="form-group">
                        <label>Venue:</label>
                        <select id="editBookingVenue" required>
                            <option value="Main Hall">Main Hall</option>
                            <option value="Second Floor">Second Floor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Package:</label>
                        <select id="editBookingPackage" required>
                            <option value="Package 1">Package 1</option>
                            <option value="Package 2">Package 2</option>
                            <option value="Package 3">Package 3</option>
                            <option value="Package 4">Package 4</option>
                            <option value="Package 5">Package 5</option>
                            <option value="Package 6">Package 6</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Guest Count:</label>
                        <input type="number" id="editBookingGuests" min="1" required>
                    </div>
                    <div class="form-group">
                        <label>Status:</label>
                        <select id="editBookingStatus" required>
                            <option value="pending">Pending</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Special Requests:</label>
                        <textarea id="editBookingSpecialRequests" rows="3"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditBookingModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
                <span class="close" onclick="closeEditBookingModal()">&times;</span>
            </div>
        </div>
    </div>

    <!-- Day Bookings Modal -->
    <div id="dayBookingsModal" class="modal">
        <div class="modal-overlay" onclick="closeDayBookingsModal()"></div>
        <div id="dayBookingsContent" class="modal-content day-bookings-content">
            <!-- Content populated by JavaScript -->
        </div>
    </div>

    </div>
    <!-- End Admin Dashboard -->
</body>
</html>
